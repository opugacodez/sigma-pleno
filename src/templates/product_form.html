{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2 class="center-align">{% if product %}Editar Produto{% else %}Adicionar Produto{% endif %}</h2>
    <form method="POST" onsubmit="removeMask()">
        <div class="input-field">
            <label for="productName">Nome</label>
            <input type="text" id="productName" name="name" placeholder="Nome" value="{{ product.name if product else '' }}" required>
        </div>
        <div class="input-field">
            <label for="productDescription">Descrição</label>
            <input type="text" id="productDescription" name="description" placeholder="Descrição" value="{{ product.description if product else '' }}">
        </div>
        <div class="input-field">
            <label for="productAmount">Valor</label>
            <input type="text" id="productAmount" name="amount" placeholder="Valor" 
                   value="{{ product.amount if product and product.amount is not none else '' }}" required>
        </div>
        <button type="submit" class="waves-effect waves-light btn">{% if product %}Atualizar{% else %}Adicionar{% endif %}</button>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
    $(document).ready(function(){
        $('#productAmount').mask('000.000.000.000.000,00', {reverse: true});
    });

    function removeMask() {
        var amountField = $('#productAmount');
        var amountValue = amountField.val().replace(/\./g, '').replace(',', '.');
        amountField.val(amountValue);
    }
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
{% endblock %}