{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2 class="center-align">{% if product %}Editar Produto{% else %}Adicionar Produto{% endif %}</h2>
    <form method="POST" onsubmit="removeMask()">
        <div class="input-field">
            <label for="productName">Nome</label>
            <input type="text" id="productName" name="name" placeholder="Nome" value="{{ product.name if product else '' }}" required>
        </div>
        <div class="input-field">
            <label for="productDescription">Descrição</label>
            <input type="text" id="productDescription" name="description" placeholder="Descrição" value="{{ product.description if product else '' }}">
        </div>
        <div class="input-field">
            <label for="productPrice">Valor</label>
            <input type="text" id="productPrice" name="price" placeholder="Valor" 
                   value="{{ product.price if product and product.price is not none else '' }}" required>
        </div>
        <div class="input-field">
            <label for="productQuantity">Quantidade</label>
            <input type="number" id="productQuantity" name="quantity" placeholder="Quantidade" 
                   value="{{ cashflow.quantity if cashflow else '' }}" required>
        </div>
        <button type="submit" class="waves-effect waves-light btn">{% if product %}Atualizar{% else %}Adicionar{% endif %}</button>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script>
    $(document).ready(function(){
        $('#productPrice').mask('000.000.000.000.000,00', {reverse: true});
    });

    function removeMask() {
        var priceField = $('#productPrice');
        var priceValue = priceField.val().replace(/\./g, '').replace(',', '.');
        priceField.val(priceValue);
    }
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
{% endblock %}